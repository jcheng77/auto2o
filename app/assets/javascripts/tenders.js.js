// Generated by CoffeeScript 1.8.0
(function() {
  $('#myModal').modal('show'); 
  $(function() {
    $("tr.select").click(function() {
      console.log('hhh');
      $("tr.select").css("backgroundColor", "white");
      this.style.backgroundColor = "#009DE0";
      return $("#m_trim_id").val($(this).data("trim_id"));
    });
    var colors = [];
    $("div.choose_color").click(function() {
      $(this).parent().attr("data-code", $(this).attr('data-code'));
      if ($(this).hasClass("currentcolor")) {
        $(this).removeClass("currentcolor");
        colors.pop($(this).attr('data-code'));
      }
      else
        {
          $(this).addClass("currentcolor");
          colors.push($(this).attr('data-code'));
        }
      return $('#colors_ids').val(colors.join(','));
    });

    $("#model").change(function() {
      if ($('#brand_id').val()){
//do nothing for now
}
else {
alert('请先选择品牌');
$(this).val('');
}

    });

    $("#submit").click(function() {
      if ($('#brand_id').val() === null || $('#model').val() === null || $('#model').val() === '' || $('#brand_id').val() === '' ){
   alert('请选择品牌和型号!');
return false;
}

    });


    $("#tender_submit").click(function() {
     if ($('#price').val() === null || $('#user_name').val() === null || $('#price').val() === '' || $('#user_name').val() === '' ){
       alert('请输入价格和你的姓名!');
       alert($('#shops').val());
       return false;
    }

   if ($('#shops').val() === null | $('#shops').val() === '' ){
       alert('请选择4S店!');
       return false;
    }


    });


    $("span.choose").click(function() {
      $(this).parent().attr("data-code", $(this).attr('data-code'));
      $(this).parent().children().removeClass('current');
      $(this).addClass("current");
      $("#pickup_time").val($("#buytime").attr('data-code'));
      $("#loan_option").val($("#loanoption").attr('data-code'));
      $("#license_location").val($("#plateplace").attr('data-code'));
      return $("#got_licence").val($("#myplate").attr('data-code'));
    });
    return $("#4sconfirm").click(function() {
     var chkArray = [];
      
      $("#checkboxlist input:checked").each(function() {
            chkArray.push($(this).val());
              
      });
      var selected;
            selected = chkArray.join(',') ;
      if(selected.length < 2 && $('[name="shops[]"]').length > 2){
        alert("请至少选择两家4S店竞价"); 
        return false;
      }
      var shop_count, shop_val;
      shop_count = $('[name="shops[]"]:checked').length;
      $("#selected_shops").text(shop_count);
      $('#shops').val(selected);
      return $("#4sModal").modal('hide');
    });
  });

}).call(this);
